import { Meta, Canvas, Story, ArgsTable } from '@storybook/blocks';

import { Information, TokensTable } from '../../../../../../docs-components';

import { LegacySelect } from './';

<Meta
  title='Avviklet/LegacySelect/Enkel'
  component={LegacySelect}
  argTypes={{
    label: {
      description: 'Tekst som vises over feltet.',
      control: {
        type: 'text',
      },
    },
    disabled: {
      description: 'Settes for å deaktivere feltet.',
      control: {
        type: 'boolean',
      },
    },
    error: {
      description: 'Settes for å indikere at det er en feil tilknyttet feltet.',
      control: {
        type: 'boolean',
      },
    },
    options: {
      description:
        'Liste med alternativer som skal vises i nedtrekkslisten. ' +
        'Alternativene er av typen `SingleSelectOption` og har følgende egenskaper:\n' +
        '- `value` er verdien som brukes av `onChange`-funksjonen.\n' +
        '- `label` er teksten som vises i listen.\n' +
        '- `formattedLabel` vises i listen i stedet for `label` hvis den er satt. Dette gir mulighet til å formatere teksten. `label` vil fortsatt være det som vises for det valgte alternativet når boksen er lukket.\n' +
        '- `keywords` er en valgfri liste med nøkkelord som brukes som oppslag når brukeren skriver i søkefeltet. Dette er nyttig hvis brukeren skal kunne søke etter andre ting enn det som står i `label`, f.eks. tekst som brukes i `formattedLabel`.',
      control: {
        type: 'object',
      },
    },
    onChange: {
      description:
        'Funksjon som kalles når brukeren velger et alternativ. Alternativets `value` sendes som parameter til funksjonen.',
      control: {
        type: 'function',
      },
    },
    value: {
      description: 'Kan brukes til å overstyre hvilken verdi som er valgt.',
      control: {
        type: 'text',
      },
    },
    hideLabel: {
      description:
        'Skjuler teksten over feltet, men gjør den likevel tilgjengelig for verktøy som skjermlesere.',
      control: {
        type: 'boolean',
      },
    },
    inputId: {
      description:
        'Gir input-feltet en ID. Dersom denne ikke satt, genereres en unik ID automatisk.',
      control: {
        type: 'text',
      },
    },
    portal: {
      description:
        'Når denne er true blir listeelemenetene rendret i en portal',
      control: {
        type: 'boolean',
      },
      defaultValue: 'true',
    },
  }}
/>

export const defaultArgs = {
  label: 'Velg et fylke',
  multiple: false,
  options: [
    {
      label: 'Agder',
      value: 'Agd',
      keywords: ['agder', 'aust-agder', 'vest-agder'],
    },
    {
      label: 'Innlandet',
      value: 'Inn',
      keywords: ['innlandet', 'hedmark', 'oppland'],
    },
    {
      label: 'Møre og Romsdal',
      value: 'MoR',
      keywords: ['møre og romsdal', 'møre', 'romsdal'],
    },
    { label: 'Nordland', value: 'Nor', keywords: ['nordland'] },
    { label: 'Oslo', value: 'Osl', keywords: ['oslo'] },
    { label: 'Rogaland', value: 'Rog', keywords: ['rogaland'] },
    {
      label: 'Vestfold og Telemark',
      value: 'VoT',
      keywords: ['vestfold og telemark', 'vestfold', 'telemark'],
    },
    {
      label: 'Troms og Finnmark',
      value: 'ToF',
      keywords: ['troms og finnmark', 'troms', 'finnmark'],
    },
    {
      label: 'Trøndelag',
      value: 'Trø',
      keywords: ['trøndelag', 'nord-trøndelag', 'sør-trøndelag'],
    },
    {
      label: 'Vestland',
      value: 'Ves',
      keywords: ['vestland', 'hordaland', 'sogn og fjordane'],
    },
    {
      label: 'Viken',
      value: 'Vik',
      keywords: ['viken', 'østfold', 'akershus', 'buskerud'],
    },
  ],
};
export const Template = (args = {}) => (
  <div style={{ width: '440px' }}>
    <LegacySelect {...{ ...defaultArgs, ...args }} />
  </div>
);

# LegacySelect (enkel)

<Information
  text='deprecated'
  description='**Denne komponenten er erstattet av [Combobox](/?path=/docs/komponenter-combobox--docs) komponent.**'
/>

`LegacySelect` er en nedtrekksmeny som lar brukeren velge et alternativ fra en liste.

## Eksempler

### Normal visning

<Canvas>
  <Story
    name='Normal'
    args={{}}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Deaktivert

<Canvas>
  <Story
    name='Deaktivert'
    args={{ disabled: true }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Med feil

<Canvas>
  <Story
    name='Med feil'
    args={{ error: true }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Med formaterte alternativer

<Canvas>
  <Story
    name='Formaterte alternativer'
    args={{
      options: [
        {
          label: 'Agder',
          value: 'Agd',
          keywords: ['agder'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Agder</strong>
              <span>
                Arendal, Farsund, Flekkefjord, Grimstad, Kristiansand,
                Lillesand, Lyngdal, Mandal, Risør, Tvedestrand
              </span>
            </span>
          ),
        },
        {
          label: 'Innlandet',
          value: 'Inn',
          keywords: ['innlandet'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Innlandet</strong>
              <span>
                Brumunddal, Elverum, Fagernes, Gjøvik, Hamar, Kongsvinger,
                Lillehammer, Moelv, Otta, Raufoss, Vinstra
              </span>
            </span>
          ),
        },
        {
          label: 'Møre og Romsdal',
          value: 'MoR',
          keywords: ['møre og romsdal', 'møre', 'romsdal'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Møre og Romsdal</strong>
              <span>
                Fosnavåg, Kristiansund, Molde, Ulsteinvik, Ålesund, Åndalsnes
              </span>
            </span>
          ),
        },
        {
          label: 'Nordland',
          value: 'Nor',
          keywords: ['nordland'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Nordland</strong>
              <span>
                Bodø, Brønnøysund, Fauske, Leknes, Mo i Rana, Mosjøen, Narvik,
                Sandnessjøen, Sortland, Stokmarknes, Svolvær
              </span>
            </span>
          ),
        },
        {
          label: 'Oslo',
          value: 'Osl',
          keywords: ['oslo'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Oslo</strong>
              <span>Oslo</span>
            </span>
          ),
        },
        {
          label: 'Rogaland',
          value: 'Rog',
          keywords: ['rogaland'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Rogaland</strong>
              <span>
                Bryne, Egersund, Haugesund, Jørpeland, Kopervik, Sandnes, Sauda,
                Skudeneshavn, Stavanger, Åkrehamn
              </span>
            </span>
          ),
        },
        {
          label: 'Troms og Finnmark',
          value: 'ToF',
          keywords: ['troms og finnmark', 'troms', 'finnmark'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Troms og Finnmark</strong>
              <span>
                Alta, Bardufoss, Finnsnes, Hammerfest, Harstad, Honningsvåg,
                Kirkenes, Tromsø, Vadsø, Vardø
              </span>
            </span>
          ),
        },
        {
          label: 'Trøndelag',
          value: 'Trø',
          keywords: ['trøndelag', 'nord-trøndelag', 'sør-trøndelag'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Trøndelag</strong>
              <span>
                Brekstad, Kolvereid, Levanger, Namsos, Orkanger, Røros, Rørvik,
                Steinkjer, Stjørdalshalsen, Trondheim, Verdalsøra
              </span>
            </span>
          ),
        },
        {
          label: 'Vestfold og Telemark',
          value: 'VoT',
          keywords: ['vestfold og telemark', 'vestfold', 'telemark'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Vestfold og Telemark</strong>
              <span>
                Brevik, Holmestrand, Horten, Kragerø, Langesund, Larvik,
                Notodden, Porsgrunn, Rjukan, Sandefjord, Skien, Stathelle,
                Stavern, Tønsberg
              </span>
            </span>
          ),
        },
        {
          label: 'Vestland',
          value: 'Ves',
          keywords: ['vestland', 'hordaland', 'sogn og fjordane'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Vestland</strong>
              <span>Bergen, Florø, Førde, Måløy, Odda, Stord</span>
            </span>
          ),
        },
        {
          label: 'Viken',
          value: 'Vik',
          keywords: ['viken', 'østfold', 'akershus', 'buskerud'],
          formattedLabel: (
            <span style={{ display: 'flex', flexDirection: 'column' }}>
              <strong>Viken</strong>
              <span>
                Askim, Drammen, Drøbak, Fredrikstad, Halden, Hokksund, Hønefoss,
                Jessheim, Kongsberg, Lillestrøm, Moss, Mysen, Sandvika,
                Sarpsborg, Ski, Svelvik
              </span>
            </span>
          ),
        },
      ],
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Egenskaper

<ArgsTable story='Normal' />

## Tilgjengelighet

### Mus

Nedtrekkslisten åpnes ved å klikke på feltet med musen. Deretter kan man klikke på alternativet man ønsker å velge.
Hvis alternativet ikke er synlig, kan man rulle seg frem til det ved bruk av rullefelt eller musehjul.

### Tastatur

Nedtrekkslisten åpnes ved å trykke på `Enter` eller `Space` når feltet har fokus.
Deretter kan man navigere seg frem til ønsket alternativ ved bruk av piltastene.

## Tokens

<TokensTable
  jsonKey='component.select'
  componentName='select'
  showPreview={false}
  description
/>
